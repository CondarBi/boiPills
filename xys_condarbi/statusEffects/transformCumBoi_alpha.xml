<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<statusEffect>
	<renderingPriority>70</renderingPriority>
	<renderInEffectsPanel>true</renderInEffectsPanel>
	<beneficial>BENEFICIAL</beneficial>
	<combatEffect>false</combatEffect>
	<sexEffect>true</sexEffect>
	<name><![CDATA[Transformative Cum (Alpha)]]></name>
	<description><![CDATA[
        [npc.NamePos] cum is infused with potent transformative magic, and can now [style.boldTfSex(transform
people into oversexualized twunks!)]
	]]></description>
	<imageName>transformCum.svg</imageName>
	<!-- https://github.com/Innoxia/liliths-throne-public/blob/dev/src/com/lilithsthrone/utils/colours/PresetColour.java -->
	<colourPrimary>BASE_BLUE_LIGHT</colourPrimary>
	<!-- This has to have a value defined, or else this XML file will fail to load. -->
	<secondaryColours/><!-- This can optionally be left blank, like the 'colourTertiary' element below. -->
	<colourTertiary/>
	
	<!-- https://github.com/Innoxia/liliths-throne-public/blob/dev/src/com/lilithsthrone/game/character/attributes/Attribute.java-->
	<attributeModifiers>
		<modifier value='100'>VIRILITY</modifier>
		<modifier value='100'>FERTILITY</modifier>
		<modifier value='50'>RESTING_LUST</modifier>
	</attributeModifiers>
	<combatMoves/>
	<spells/>
	
	<extraEffects>
		<effect><![CDATA[[style.boldTfSex(Orgasms transform sex partners into oversexualized twunks!)]]]></effect>
	</extraEffects>
	<applicationCondition><![CDATA[
		false
	]]></applicationCondition>
	
	<applyEffect><![CDATA[
		#IF(game.isInSex() && npc == sex.getCharacterOrgasming() && sex.isReadyToOrgasm(npc) && npc.hasPenisIgnoreDildo() && npc.getPenisRawCumExpulsionValue() != 0)
			[##
				function transformCum(partner) {
					if(partner.isAbleToHaveRaceTransformed && !partner.isUnique() && !partner.getFetishDesire(FETISH_TRANSFORMATION_RECEIVING).isNegative()) {
						var targetBody = npc.getTrueRace().getRacialBody();



						if(!partner.hasStatusEffect(SE_xys_condarbi_transformCumBoi_alpha)) {
							partner.addStatusEffect(SE_xys_condarbi_transformCumBoi, 21600);
						};
					};
				};
			]
			[##
				function getPartners(characterMap) {
					characterMap.remove(npc); 
					characterMap.keySet().forEach(transformCum);
				}
			]
			[##sex.getOngoingActionsMap(npc).values().stream().forEach(getPartners)]
		#ENDIF
	]]></applyEffect>
	
	<applyRemovalEffect/>
	
	<applyPostRemovalEffect/>
	
</statusEffect>
