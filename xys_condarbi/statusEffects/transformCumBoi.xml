<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<statusEffect>
	<renderingPriority>70</renderingPriority>
	<renderInEffectsPanel>true</renderInEffectsPanel>
	<beneficial>BENEFICIAL</beneficial>
	<combatEffect>false</combatEffect>
	<sexEffect>true</sexEffect>
	<name><![CDATA[Transformative Cum]]></name>
	<description><![CDATA[
		[npc.NamePos] cum can now [style.boldTfSex(transform people into futanaries!)]
	]]></description>
	<imageName>transformCum.svg</imageName>
	<!-- https://github.com/Innoxia/liliths-throne-public/blob/dev/src/com/lilithsthrone/utils/colours/PresetColour.java -->
	<colourPrimary>BASE_PINK_LIGHT</colourPrimary>
	<!-- This has to have a value defined, or else this XML file will fail to load. -->
	<secondaryColours/><!-- This can optionally be left blank, like the 'colourTertiary' element below. -->
	<colourTertiary/>
	
	<!-- https://github.com/Innoxia/liliths-throne-public/blob/dev/src/com/lilithsthrone/game/character/attributes/Attribute.java-->
	<attributeModifiers>
		<modifier value='50'>VIRILITY</modifier>
		<modifier value='50'>FERTILITY</modifier>
	</attributeModifiers>
	<combatMoves/>
	<spells/>
	
	<extraEffects>
		<effect><![CDATA[[style.boldTfSex(Orgasms transform sex partners into futanaries!)]]]></effect>
	</extraEffects>
	<applicationCondition><![CDATA[
		false
	]]></applicationCondition>
	
	<applyEffect><![CDATA[
		#IF(game.isInSex() && npc == sex.getCharacterOrgasming() && sex.isReadyToOrgasm(npc) && npc.hasPenisIgnoreDildo() && npc.getPenisRawCumExpulsionValue() != 0)
			[##
				function transformCum(partner) {
					if(partner.getTrueRace() != RACE_DEMON && !partner.isUnique() && !partner.getFetishDesire(FETISH_TRANSFORMATION_RECEIVING).isNegative()) {
						var partnerBody = partner.getTrueRace().getRacialBody();

						if(!partner.hasPenisIgnoreDildo())
							game.appendToTextEndStringBuilder(partner.setPenisType(partnerBody.getPenisType()));
						if(partner.getPenisRawSizeValue() < PENIS_LENGTH_THREE_LARGE.getMedianValue()) 
							game.appendToTextEndStringBuilder(partner.incrementPenisSize(5));
						if(partner.getTesticleSize().getValue() < 3) 
							game.appendToTextEndStringBuilder(partner.incrementTesticleSize(1));
						if(partner.getPenisRawCumStorageValue() < CUM_PRODUCTION_FOUR_LARGE.getMedianValue() || Math.random() < 0.2) 
							game.appendToTextEndStringBuilder(partner.incrementPenisCumStorage(5));
						if(partner.getPenisRawCumProductionRegenerationValue() < 50000) 
							game.appendToTextEndStringBuilder(partner.incrementPenisCumProductionRegeneration(1000));
						if(!partner.hasCumModifier(FLUID_MODIFIER_VISCOUS)) 
							game.appendToTextEndStringBuilder(partner.addCumModifier(FLUID_MODIFIER_VISCOUS));
						game.appendToTextEndStringBuilder(partner.incrementAttribute(ATTRIBUTE_VIRILITY, 5));
					
						if(!partner.hasBreasts())
							game.appendToTextEndStringBuilder(partner.setBreastType(partnerBody.getBreastType()));
						if(partner.getBreastRawSizeValue() < 8) 
							game.appendToTextEndStringBuilder(partner.incrementBreastSize(1));
					
						if(!partner.hasVagina())
							game.appendToTextEndStringBuilder(partner.setVaginaType(partnerBody.getVaginaType()));
						if(partner.getVaginaWetness().getValue() < 3) 
							game.appendToTextEndStringBuilder(partner.incrementVaginaWetness(1));
						if(partner.getVaginaElasticity().getValue() < 7) {
							game.appendToTextEndStringBuilder(partner.incrementVaginaElasticity(1));
						} else if(partner.getVaginaRawCapacityValue() > 2) {
							game.appendToTextEndStringBuilder(partner.incrementVaginaCapacity(-1, true));
						};
						if(partner.getVaginaPlasticity().getValue() > 0)
							game.appendToTextEndStringBuilder(partner.incrementVaginaPlasticity(-1));
						if(partner.getVaginaDepth().getValue() < 2)
							game.appendToTextEndStringBuilder(partner.incrementVaginaDepth(1));
						if(!partner.isVaginaSquirter()) 
							game.appendToTextEndStringBuilder(partner.setVaginaSquirter(true));
						game.appendToTextEndStringBuilder(partner.incrementAttribute(ATTRIBUTE_FERTILITY, 5));
					
						if(!partner.getFemininityValue() < FEMININITY_FEMININE.getMedianFemininity())
							game.appendToTextEndStringBuilder(partner.incrementFemininity(5));

						if(!partner.hasFetish(FETISH_CUM_ADDICT)){
							game.appendToTextEndStringBuilder(partner.addFetish(FETISH_CUM_ADDICT));
						};
					};
				};
			]
			[##
				function getPartners(characterMap) {
					characterMap.remove(npc); 
					characterMap.keySet().forEach(transformCum);
				}
			]
			[##sex.getOngoingActionsMap(npc).values().stream().forEach(getPartners)]
		#ENDIF
	]]></applyEffect>
	
	<applyRemovalEffect><![CDATA[
		#IF(!npc.hasStatusEffect(SE_xys_condarbi_transformCumBoi_alpha) && npc.hasPenisIgnoreDildo() && npc.getPenisRawCumStorageValue() >= 2000 && npc.hasFetish(FETISH_CUM_STUD) && npc.hasFetish(FETISH_TRANSFORMATION_GIVING) && Math.random() < 0.3)
			<p>
                [npc.Name] can't get enough of it, the feeling of turning people [npc.she] [npc.verb(cum)] on into futas. As [npc.she] 
                #IF(npc.isCoverableAreaExposed(CA_PENIS))
                    [npc.verb(stroke)] [npc.her] [npc.cock+], 
                #ELSE
                    [npc.verb(rub)] [npc.her] [npc.cock+] through [npc.her] [#npc.getHighestZLayerCoverableArea(CA_PENIS).getName()], 
                #ENDIF
                thinking about the people [npc.sheHas] transformed so far, [npc.she] can't help but want <b>more...</b>
            <p>
                [npc.She] [npc.verb(feel)] [npc.her] body starting to react back to those desires, to spread [npc.her] seed far and wide, to turn people into just like [npc.herHim]... [style.boldTfSex(to dye this world in [npc.her] colours!)]
            </p>

            #IF(npc.getPenisRawSizeValue() < PENIS_LENGTH_FIVE_ENORMOUS.getMedianValue())
                [#npc.setPenisSize(PENIS_LENGTH_FIVE_ENORMOUS.getMedianValue())]
            #ENDIF
            #IF(npc.getTesticleSize().getValue() < 7)
                [#npc.setTesticleSize(7)]
            #ENDIF
            #IF(npc.getPenisRawCumStorageValue() < CUM_PRODUCTION_SIX_EXTREME.getMedianValue())
                [#npc.setPenisCumStorage(CUM_PRODUCTION_SIX_EXTREME.getMedianValue())]
            #ENDIF
            #IF(npc.getPenisRawCumProductionRegenerationValue() < 5000) 
				[#npc.setPenisCumProductionRegeneration(5000)]
            #ENDIF
			[##npc.fillCumToMaxStorage()]
            #IF(game.isMuskContentEnabled() && !npc.hasCumModifier(FLUID_MODIFIER_MUSKY))
                [#npc.addCumModifier(FLUID_MODIFIER_MUSKY)]
            #ENDIF
            #IF(!npc.hasCumModifier(FLUID_MODIFIER_VISCOUS))
                [#npc.addCumModifier(FLUID_MODIFIER_VISCOUS)]
            #ENDIF
            #IF(!npc.hasCumModifier(FLUID_MODIFIER_ADDICTIVE))
                [#npc.addCumModifier(FLUID_MODIFIER_ADDICTIVE)]
            #ENDIF
			#IF(!npc.getCovering(BODY_COVERING_TYPE_CUM).isPrimaryGlowing())
				<p>
					A deep throbbing sensation builds up within [npc.her] [npc.balls], and as a trickle of precum leaks out from the head of [npc.her] member,
					 [npc.she] [npc.verb(let)] out [npc.a_moan+] when [npc.she] [npc.verb(realise)] that [npc.her] [npc.cum] is now [style.boldGrow(glowing)]!
					[##npc.getCovering(BODY_COVERING_TYPE_CUM).setPrimaryGlowing(true)]
				</p>
			#ENDIF

            #IF(npc.getBreastRawSizeValue() < 15)
                [#npc.setBreastSize(15)]
            #ENDIF

			#IF(npc.hasVagina())
				#IF(npc.getVaginaWetness().getValue() < 5) 
					[#npc.setVaginaWetness(5)]
				#ENDIF
				#IF(npc.getVaginaElasticity().getValue() < 7) 
					[#npc.setVaginaElasticity(7)]
				#ENDIF
				#IF(npc.getVaginaRawCapacityValue() > 1) 
					[#npc.setVaginaElasticity(1)]
				#ENDIF
				#IF(npc.getVaginaPlasticity().getValue() > 0) 
					[#npc.setVaginaPlasticity(0)]
				#ENDIF
				#IF(!npc.isVaginaSquirter()) 
					[#npc.setVaginaSquirter(true)]
				#ENDIF
			#ENDIF

			#IF(npc.getFemininityValue() < FEMININITY_FEMININE_STRONG.getMaximumFemininity())
				[#npc.setFemininity(FEMININITY_FEMININE_STRONG.getMaximumFemininity())]
			#ENDIF

			#IF(!npc.hasFetish(FETISH_CUM_STUD))
				[#npc.addFetish(FETISH_CUM_STUD)]
			#ENDIF
			#IF(!npc.hasFetish(FETISH_CUM_ADDICT))
				[#npc.addFetish(FETISH_CUM_ADDICT)]
			#ENDIF
			#IF(!npc.hasFetish(FETISH_SIZE_QUEEN))
				[#npc.addFetish(FETISH_SIZE_QUEEN)]
			#ENDIF
            <p>
                [npc.A_moan] escapes [npc.her] [npc.lips] as [npc.her] body finishes its transformation into a new, more suitable form for seeding. Idly stroking [npc.her] [npc.cock+], [npc.she] [npc.verb(shudder)] in delight as [npc.she] [npc.verb(think)] of ways in using [npc.her] [npc.cum+]'s newfound potency...
            </p>
            [##npc.addStatusEffect(SE_xys_condarbi_transformCumBoi_alpha, 21600)]
        #ENDIF
	]]></applyRemovalEffect>
	
	<applyPostRemovalEffect/>
	
</statusEffect>
